# Lab01S02 - Paginação e Coleta de 1.000 Repositórios  

### Descrição  
O objetivo desta fase foi expandir a coleta de dados para os 1.000 repositórios mais populares do GitHub (com maior número de estrelas), utilizando a API GraphQL da própria plataforma.  

Para alcançar esse resultado, foi implementado um mecanismo de paginação automática, permitindo que a coleta percorresse todos os lotes até completar os 1.000 repositórios.  

Os dados coletados já incluem todas as métricas necessárias para responder às Questões de Pesquisa (RQs) propostas no enunciado do trabalho.  

---  

### Objetivos desta Etapa  
- Implementar **paginação na consulta GraphQL** para coletar 1.000 repositórios mais populares.  
- Armazenar os dados em dois formatos:  
  - **JSON**: contendo todos os registros completos.  
  - **CSV**: organizado em colunas para facilitar análises posteriores.  
- Consolidar as informações que serão utilizadas nas análises das RQs:  
  - **RQ01:** Idade do repositório (data de criação).  
  - **RQ02:** Total de pull requests aceitas.  
  - **RQ03:** Total de releases.  
  - **RQ04:** Tempo até a última atualização.  
  - **RQ05:** Linguagem primária.  
  - **RQ06:** Percentual de issues fechadas (razão entre fechadas e total).  
- Elaborar a **primeira versão do relatório**, com definição das hipóteses informais para cada RQ.  

---  

### Estrutura do Projeto  

```
├── check_rate_limit.py     # Verifica o limite de requisições da API do GitHub
├── fetch_data.py           # Executa a consulta GraphQL e salva os dados coletados
├── query.graphql           # Consulta GraphQL com as métricas necessárias
├── repos_1000.json         # Arquivo com dados de 1000 repositórios mais populares em formato json
├── repos_1000.csv          # Arquivo com dados de 1000 repositórios mais populares em formato csv
├── README.md               # Documentação da entrega
```

---

### Tecnologias Utilizadas
- **Python 3.8+**
- **API GraphQL do GitHub**
- **Biblioteca requests** para comunicação HTTP
- **JSON** para armazenamento de dados

---

### Configuração e Execução

#### 1. Pré-requisitos
- Python 3.8 ou superior instalado.
- Token de acesso pessoal do GitHub (PAT) com permissões de leitura em repositórios públicos.
- Biblioteca `requests` instalada:
```bash
pip install requests
```

#### 2. Definir token
- Gerar token pessoal pelo github
- Criar arquivo "secrets/github_token.txt" e colar o token
  

#### 3. Verificar limite de requisições
```bash
python check_rate_limit.py
```

#### 4. Executar coleta de dados
```bash
python fetch_data.py
```
O resultado será salvo em `repos_100.json`.

---

### Estrutura dos Dados Coletados
Exemplo de um registro no `repos_1000.csv`:

| name                      | owner            | createdAt           | updatedAt           | primaryLanguage | mergedPRs | releases | openIssues | closedIssues | stars   |
|----------------------------|-----------------|---------------------|---------------------|----------------|-----------|----------|------------|--------------|---------|
| freeCodeCamp              | freeCodeCamp    | 2014-12-24T17:49:19Z | 2025-08-11T19:11:46Z | TypeScript     | 25669     | 0        | 192        | 19600        | 425544  |
| build-your-own-x          | codecrafters-io | 2018-05-09T12:03:18Z | 2025-08-11T20:01:19Z | Markdown       | 142       | 0        | 219        | 594          | 409145  |
| awesome                   | sindresorhus    | 2014-07-11T13:42:37Z | 2025-08-11T18:02:16Z | None           | 679       | 0        | 14         | 340          | 390815  |
| free-programming-books    | EbookFoundation | 2013-10-11T06:50:37Z | 2025-08-11T19:46:17Z | Python         | 6818      | 0        | 31         | 1150         | 364853  |
| public-apis               | public-apis     | 2016-03-20T23:49:42Z | 2025-08-11T19:53:52Z | Python         | 1872      | 0        | 2          | 703          | 360752  |
| developer-roadmap         | kamranahmedse   | 2017-03-15T13:45:52Z | 2025-08-11T19:58:24Z | TypeScript     | 3664      | 1        | 250        | 2687         | 333559  |
| coding-interview-university | jwasham       | 2016-06-06T02:34:12Z | 2025-08-11T18:58:47Z | None           | 415       | 0        | 63         | 453          | 324125  |

Exemplo de um registro no `repos_1000.json`:
```json
{
  "name": "freeCodeCamp",
  "owner": { "login": "freeCodeCamp" },
  "stargazerCount": 425545,
  "primaryLanguage": { "name": "TypeScript" },
  "createdAt": "2014-12-24T17:49:19Z",
  "updatedAt": "2025-08-11T20:15:05Z",
  "pullRequests": { "totalCount": 25669 },
  "releases": { "totalCount": 0 },
  "issues": { "totalCount": 192 },
  "issuesClosed": { "totalCount": 19600 }
}
```
---

### Metodologia
1. Foi criada uma query GraphQL (`query.graphql`) contendo todas as métricas necessárias para responder às RQs definidas no enunciado.
2. Utilizou-se `fetch_data.py` para enviar requisições autenticadas à API do GitHub e salvar os dados no arquivo `repos_1000.csv`.
3. Antes da coleta, o script `check_rate_limit.py` permite verificar se o limite de requisições da API é suficiente para evitar bloqueios.
4. Todos os dados foram coletados de forma automática, sem uso de bibliotecas que encapsulem o acesso à API GraphQL.
